<!doctype html>
<html lang="ru">
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Roboto+Mono:wght@400;700&family=Roboto:wght@400;700&display=swap" rel="stylesheet">

  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0-alpha1/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-GLhlTQ8iRABdZLl6O3oVMWSktQOp6b7In1Zl3/Jr59b6EGGoI1aFkw7cmDA6j6gD" crossorigin="anonymous">
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.3.0/css/all.min.css" integrity="sha512-SzlrxWUlpfuzQ+pcUCosxcglQRNAq/DZjVsC0lE40xsADsfeQoEypE+enwcOiGjk/bSuGGKHEyjSoQ1zVisanQ==" crossorigin="anonymous" referrerpolicy="no-referrer" />
  <link href="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/themes/prism.min.css" rel="stylesheet" />

  <title>Wowhead Tooltips: Подробное руководство и FAQ</title>

  <style>
    body { 
      padding-top: 20px; 
      padding-bottom: 20px; 
      font-family: 'Roboto', sans-serif; 
    }
    h1, h2, h3, h4, h5, h6 {
      font-family: 'Roboto', sans-serif; 
      font-weight: 700; 
      scroll-margin-top: 80px; 
    }
    .section { margin-bottom: 40px; padding-bottom: 20px; border-bottom: 1px solid #eee; }
    .section:last-child { border-bottom: none; margin-bottom: 0; padding-bottom: 0; }
    h2 { margin-top: 40px; margin-bottom: 20px; border-bottom: 1px solid #ddd; padding-bottom: 10px; }
    h3 { margin-top: 30px; margin-bottom: 15px; }
    h4 { margin-top: 25px; margin-bottom: 10px; font-size: 1.25rem; font-weight: 700; }
    
    code:not([class*="language-"]) { 
      font-family: 'Roboto Mono', monospace; 
      background-color: #f8f9fa; 
      padding: 0.2em 0.4em; 
      margin: 0; 
      font-size: 85%; 
      border-radius: 3px; 
      color: #d63384; 
    }
    pre { 
      font-family: 'Roboto Mono', monospace; 
      background-color: #f8f9fa; 
      border: 1px solid #dee2e6; 
      border-radius: 0.25rem; 
      padding: 1rem; 
      white-space: pre-wrap; 
      word-wrap: break-word; 
      font-size: 0.875em; 
    }
    pre code { 
      font-family: 'Roboto Mono', monospace !important; 
      background-color: transparent !important; 
      padding: 0; margin: 0; 
      font-size: inherit; 
      border-radius: 0; 
      color: inherit; 
    }
    table { margin-bottom: 1rem; }
    .table th, .table td { vertical-align: middle; }
    .navbar { margin-bottom: 30px; position: sticky; top: 0; z-index: 1030; }
    #sidebarMenu { position: sticky; top: 80px; height: calc(100vh - 100px); overflow-y: auto; padding-top: 20px; z-index: 1020; }
    .table-responsive { margin-top: 1rem; margin-bottom: 1rem; }
  </style>
</head>
<body>

  <div class="container"> 
    <nav class="navbar navbar-expand-lg navbar-light bg-light rounded mb-4 shadow-sm">
      <div class="container-fluid">
        <a class="navbar-brand" href="#">
          <i class="fas fa-book-open me-2"></i>Wowhead Tooltips FAQ
        </a>
      </div>
    </nav>

    <div class="row">
      <div class="col-lg-4"> 
        <nav id="sidebarMenu" class="d-none d-lg-block bg-light sidebar p-3 rounded"> 
          <div class="position-sticky">
            <ul class="nav flex-column">
              <li class="nav-item">
                <a class="nav-link" href="#section1"> 
                  <i class="fas fa-play-circle me-2"></i>1. Введение
                </a>
              </li>
              <li class="nav-item">
                <a class="nav-link" href="#section2">
                  <i class="fas fa-cogs me-2"></i>2. Основные компоненты
                </a>
              </li>
              <li class="nav-item">
                <a class="nav-link" href="#section3">
                  <i class="fas fa-brain me-2"></i>3. Логика работы power.js
                </a>
                <ul class="nav flex-column ms-3">
                    <li class="nav-item"><a class="nav-link" href="#section3_1">3.1. Игровые окружения</a></li>
                    <li class="nav-item"><a class="nav-link" href="#section3_2">3.2. Языки</a></li>
                    <li class="nav-item"><a class="nav-link" href="#section3_3">3.3. Сопоставление языка и версии</a></li>
                </ul>
              </li>
              <li class="nav-item">
                <a class="nav-link" href="#section4">
                  <i class="fas fa-cubes me-2"></i>4. Сущности Wowhead
                </a>
                 <ul class="nav flex-column ms-3">
                    <li class="nav-item"><a class="nav-link" href="#section4_1">4.1. Классификация</a></li>
                    <li class="nav-item"><a class="nav-link" href="#section4_2">4.2. Карта зависимостей</a></li>
                </ul>
              </li>
              <li class="nav-item">
                <a class="nav-link" href="#section5">
                  <i class="fas fa-file-code me-2"></i>5. Работа с XML
                </a>
                <ul class="nav flex-column ms-3">
                    <li class="nav-item"><a class="nav-link" href="#section5_1">5.1. Требования к окружению</a></li>
                    <li class="nav-item"><a class="nav-link" href="#section5_2">5.2. URL для XML</a></li>
                    <li class="nav-item"><a class="nav-link" href="#section5_3">5.3. Данные из XML</a></li>
                </ul>
              </li>
              <li class="nav-item">
                <a class="nav-link" href="#section6">
                  <i class="fas fa-balance-scale me-2"></i>6. power.js vs. XML
                </a>
              </li>
              <li class="nav-item">
                <a class="nav-link" href="#section7">
                  <i class="fas fa-lightbulb me-2"></i>7. Полезные советы
                </a>
              </li>
            </ul>
          </div>
        </nav>
      </div>

      <div class="col-lg-8"> 
        <main>
          <div class="p-5 mb-4 bg-body-tertiary rounded-3">
            <div class="container-fluid py-5">
              <h1 class="display-5 fw-bold" id="main-title"><i class="fas fa-book me-3"></i>Wowhead Tooltips</h1>
              <p class="col-lg-10 fs-4"> 
                Подробное руководство и FAQ по использованию скрипта <code>power.js</code> (<code>https://wow.zamimg.com/widgets/power.js</code>) для отображения всплывающих подсказок Wowhead.
              </p>
            </div>
          </div>

          <section id="section1" class="section">
            <h2><i class="fas fa-play-circle me-2"></i>1. Введение</h2>
            <p>Добро пожаловать в полное руководство по всплывающим подсказкам Wowhead, основанным на виджете <code>power.js</code> (<code>https://wow.zamimg.com/widgets/power.js</code>). Цель этого документа — объединить знания, разъяснить функциональные возможности и предоставить подробный справочник для разработчиков и сотрудников Wowhead, работающих с этим мощным инструментом или документирующих его.</p>
            <p>Скрипт <code>https://wow.zamimg.com/widgets/power.js</code> позволяет веб-сайтам отображать насыщенные интерактивные всплывающие подсказки для различных сущностей World of Warcraft (и других игр Blizzard) путем простой ссылки на Wowhead или использования специальных атрибутов данных. Данное руководство в первую очередь посвящено его применению для World of Warcraft.</p>
            <p>Этот документ синтезирует информацию из анализа самого скрипта <code>https://wow.zamimg.com/widgets/power.js</code>, наблюдаемых паттернов использования API и общепринятых практик интеграции.</p>
          </section>

          <section id="section2" class="section">
            <h2><i class="fas fa-cogs me-2"></i>2. Основные компоненты: <code>power.js</code> и <code>whTooltips</code></h2>
            <p>Магия всплывающих подсказок Wowhead заключается в скрипте <code>https://wow.zamimg.com/widgets/power.js</code>. Для инициализации и настройки его поведения на веб-странице <strong>перед</strong> загрузкой <code>https://wow.zamimg.com/widgets/power.js</code> должен быть определен глобальный объект JavaScript с именем <code>whTooltips</code> (исторически также использовалось <code>wowhead_tooltips</code>).</p>
            
            <h3>Пример базовой HTML-настройки:</h3>
            <pre><code class="language-markup">&lt;script&gt;
const whTooltips = {
  colorLinks: true,  // Wowhead применяет цвета качества к ссылкам
  iconizeLinks: true, // Wowhead добавляет иконки рядом со ссылками
  renameLinks: true,  // Wowhead переименовывает текст ссылки на официальное название сущности
  iconSize: 'tiny'   // Размер иконок по умолчанию ('tiny', 'small', 'medium', 'large')
};
&lt;/script&gt;
&lt;script src="https://wow.zamimg.com/widgets/power.js"&gt;&lt;/script&gt;</code></pre>
            
            <h4>Ключевые параметры объекта <code>whTooltips</code>:</h4>
            <ul>
              <li><code>colorLinks: true</code> — Позволяет <code>https://wow.zamimg.com/widgets/power.js</code> применять стандартные цвета качества Wowhead к ссылкам.</li>
              <li><code>iconizeLinks: true</code> — Позволяет <code>https://wow.zamimg.com/widgets/power.js</code> автоматически добавлять иконки рядом со ссылками.</li>
              <li><code>renameLinks: true</code> — Позволяет <code>https://wow.zamimg.com/widgets/power.js</code> изменять текст ссылки на официальное название сущности из базы данных Wowhead.</li>
              <li><code>iconSize: 'tiny'</code> — Устанавливает размер по умолчанию для иконок, добавляемых скриптом. Доступные значения: <code>'tiny'</code>, <code>'small'</code>, <code>'medium'</code>, <code>'large'</code>.</li>
            </ul>
            
            <h3>Важное замечание по конфигурации <code>whTooltips</code>:</h3>
            <p>Объект <code>whTooltips</code> — это <strong>глобальная конфигурация</strong> для всех всплывающих подсказок на одной странице. Скрипт <code>https://wow.zamimg.com/widgets/power.js</code> считывает этот объект один раз при инициализации. Это означает, что такие настройки, как <code>iconSize</code>, <code>colorLinks</code> и <code>renameLinks</code>, будут применяться универсально ко всем всплывающим подсказкам Wowhead, отображаемым этим экземпляром <code>https://wow.zamimg.com/widgets/power.js</code> на странице. Индивидуальная настройка этих параметров для каждой отдельной ссылки через <code>whTooltips</code> невозможна. Вместо этого, для изменения внешнего вида отдельных ссылок (например, текста или цвета), плагины или пользовательские скрипты должны напрямую модифицировать HTML-атрибуты этих ссылок, предварительно установив соответствующие глобальные флаги в <code>whTooltips</code> (например, <code>colorLinks: false</code>, <code>renameLinks: false</code>), чтобы <code>https://wow.zamimg.com/widgets/power.js</code> не переопределял эти изменения.</p>
          </section>

          <section id="section3" class="section">
            <h2><i class="fas fa-brain me-2"></i>3. Логика работы <code>power.js</code></h2>
            <p>Чтобы эффективно использовать <code>https://wow.zamimg.com/widgets/power.js</code>, важно понимать, как он обрабатывает различные версии игр, языки и типы данных.</p>

            <h3 id="section3_1">3.1. Игровые окружения (Data Environments) и версии игр</h3>
            <p>Скрипт <code>https://wow.zamimg.com/widgets/power.js</code> внутренне управляет данными для разных игр и их состояний (live, PTR, beta, classic и т.д.) с помощью системы "окружений данных" (data environments) и "деревьев данных" (data trees).</p>
            
            <h4>Внутренние идентификаторы <code>power.js</code>:</h4>
            <p>Анализ скрипта <code>https://wow.zamimg.com/widgets/power.js</code> показывает использование следующих внутренних констант:</p>
            <ul>
              <li><code>WH.dataEnv</code>: Определяет конкретные версии и состояния игры (например, <code>MAIN: 1</code> для Retail Live, <code>CLASSIC: 4</code> для Classic Era, <code>WRATH: 8</code> для WotLK Classic и т.д.).</li>
              <li><code>WH.dataEnvKey</code>: Сопоставляет числовые ID с текстовыми ключами (например, <code>1:"live"</code>, <code>4:"classic"</code>, <code>8:"wrath"</code>).</li>
              <li><code>WH.dataTree</code>: Группирует окружения в более крупные категории (например, <code>RETAIL: 1</code>, <code>CLASSIC: 4</code>).</li>
            </ul>

            <h4>Сопоставление с параметром <code>domain</code>:</h4>
            <p>Параметр <code>domain</code> в ссылках или атрибутах <code>data-wowhead</code> используется для указания <code>https://wow.zamimg.com/widgets/power.js</code>, какую версию игры и язык отображать. Этот параметр является ключевым для корректной работы локализованных и версионных подсказок. Ниже приведена таблица распространенных значений <code>domain</code> и их предполагаемое соответствие.</p>
            
            <div class="table-responsive">
              <table class="table table-striped table-bordered caption-top">
                <caption><i class="fas fa-globe-americas me-1"></i>Таблица 1: Соответствие параметра <code>domain</code> и версий Wowhead</caption>
                <thead class="table-dark">
                  <tr>
                    <th><code>domain</code> (ввод)</th>
                    <th>Сайт Wowhead (пример)</th>
                    <th>Ключ <code>power.js</code> (предположительно)</th>
                    <th><code>WH.dataEnv</code> (предположительно)</th>
                  </tr>
                </thead>
                <tbody>
                  <tr><td>(пусто или <code>en</code>)</td><td><code>www.wowhead.com/</code></td><td><code>live</code></td><td><code>MAIN</code> (1)</td></tr>
                  <tr><td><code>ru</code></td><td><code>www.wowhead.com/ru/</code></td><td><code>ru</code> (использует <code>live</code>)</td><td><code>MAIN</code> (1)</td></tr>
                  <tr><td><code>de</code></td><td><code>www.wowhead.com/de/</code></td><td><code>de</code> (использует <code>live</code>)</td><td><code>MAIN</code> (1)</td></tr>
                  <tr><td><code>cn</code></td><td><code>www.wowhead.com/cn/</code></td><td><code>cn</code> (использует <code>live</code>)</td><td><code>MAIN</code> (1)</td></tr>
                  <tr><td><code>classic</code></td><td><code>www.wowhead.com/classic/</code></td><td><code>classic</code></td><td><code>CLASSIC</code> (4)</td></tr>
                  <tr><td><code>ru.classic</code></td><td><code>www.wowhead.com/classic/ru/</code></td><td><code>ru.classic</code></td><td><code>CLASSIC</code> (4)</td></tr>
                  <tr><td><code>tbc</code></td><td><code>www.wowhead.com/tbc/</code></td><td><code>tbc</code></td><td><code>TBC</code> (5)</td></tr>
                  <tr><td><code>es.tbc</code></td><td><code>www.wowhead.com/tbc/es/</code></td><td><code>es.tbc</code></td><td><code>TBC</code> (5)</td></tr>
                  <tr><td><code>wotlk</code></td><td><code>www.wowhead.com/wotlk/</code></td><td><code>wotlk</code> (соотв. <code>wrath</code>)</td><td><code>WRATH</code> (8)</td></tr>
                  <tr><td><code>fr.wotlk</code></td><td><code>www.wowhead.com/wotlk/fr/</code></td><td><code>fr.wotlk</code></td><td><code>WRATH</code> (8)</td></tr>
                  <tr><td><code>cata</code></td><td><code>www.wowhead.com/cata/</code></td><td><code>cata</code></td><td><code>CATA</code> (11)</td></tr>
                  <tr><td><code>ko.cata</code></td><td><code>www.wowhead.com/cata/ko/</code></td><td><code>ko.cata</code></td><td><code>CATA</code> (11)</td></tr>
                  <tr><td><code>mop-classic</code></td><td><code>www.wowhead.com/mop-classic/</code></td><td><code>mop-classic</code> (соотв. <code>mists</code>)</td><td><code>MISTS</code> (15)</td></tr>
                  <tr><td><code>ptr</code></td><td><code>www.wowhead.com/ptr/</code></td><td><code>ptr</code></td><td><code>PTR</code> (2)</td></tr>
                  <tr><td><code>beta</code></td><td><code>www.wowhead.com/beta/</code></td><td><code>beta</code></td><td><code>BETA</code> (3)</td></tr>
                </tbody>
              </table>
            </div>
            <p class="mt-2"><strong>Примечание:</strong> <code>https://wow.zamimg.com/widgets/power.js</code> использует внутренние функции (например, <code>WH.getLocaleFromDomain.L</code>, <code>WH.getDataEnvFromKey</code>) для сопоставления этих строковых представлений с числовыми идентификаторами.</p>

            <h4>PTR и Beta версии:</h4>
            <ul>
              <li>PTR (Public Test Realm / Общедоступный тестовый игровой мир): URL <code>https://www.wowhead.com/ptr/</code>, параметр <code>domain=ptr</code>.</li>
              <li>Beta (Бета-версия): URL <code>https://www.wowhead.com/beta/</code>, параметр <code>domain=beta</code>.</li>
            </ul>
            <p>Эти версии обычно предоставляют всплывающие подсказки только на английском языке.</p>

            <h3 id="section3_2">3.2. Языки</h3>
            <p><code>https://wow.zamimg.com/widgets/power.js</code> поддерживает локализацию подсказок для множества языков. Основные языковые домены, которые можно использовать в параметре <code>domain</code>:</p>
            <div class="row row-cols-1 row-cols-sm-2 row-cols-md-3 g-3">
                <div class="col"><div class="p-2 border bg-light rounded"><code>en</code> - Английский (часто используется по умолчанию)</div></div>
                <div class="col"><div class="p-2 border bg-light rounded"><code>ru</code> - Русский</div></div>
                <div class="col"><div class="p-2 border bg-light rounded"><code>de</code> - Немецкий</div></div>
                <div class="col"><div class="p-2 border bg-light rounded"><code>es</code> - Испанский</div></div>
                <div class="col"><div class="p-2 border bg-light rounded"><code>fr</code> - Французский</div></div>
                <div class="col"><div class="p-2 border bg-light rounded"><code>it</code> - Итальянский</div></div>
                <div class="col"><div class="p-2 border bg-light rounded"><code>pt</code> - Португальский (обычно бразильский вариант, PT-BR)</div></div>
                <div class="col"><div class="p-2 border bg-light rounded"><code>ko</code> - Корейский</div></div>
                <div class="col"><div class="p-2 border bg-light rounded"><code>cn</code> - Китайский (упрощенный)</div></div>
                <div class="col"><div class="p-2 border bg-light rounded"><code>tw</code> - Китайский (традиционный)</div></div>
            </div>
            <p class="mt-3">Внутренне <code>https://wow.zamimg.com/widgets/power.js</code> сопоставляет эти коды языков с числовыми идентификаторами локалей (например, через объект <code>WH.getLocaleFromDomain.L</code>, где <code>ru:7</code>, <code>de:3</code> и т.д.).</p>

            <h3 id="section3_3">3.3. Сопоставление языка и версии игры</h3>
            <p>Для корректного отображения подсказок для определенной версии игры на определенном языке используется комбинированный параметр <code>domain</code>.</p>
            <ul>
              <li><strong>Формат <code>язык.версия</code>:</strong> Это предпочтительный и наиболее корректный формат. Примеры: <code>ru.classic</code>, <code>de.wotlk</code>, <code>cn.cata</code>, <code>fr.mop-classic</code>. Скрипт <code>https://wow.zamimg.com/widgets/power.js</code> разбирает такой домен, применяя указанную языковую локаль к данным соответствующей версии игры.</li>
              <li><strong>Формат <code>версия.язык</code> (не рекомендуется):</strong> Хотя некоторые системы могут пытаться автоматически исправлять такой формат (например, <code>classic.ru</code> на <code>ru.classic</code>), для надежности всегда следует использовать формат <code>язык.версия</code>.</li>
              <li><strong>Только версия (например, <code>domain=classic</code>, <code>domain=wotlk</code>):</strong> В этом случае <code>https://wow.zamimg.com/widgets/power.js</code> будет использовать данные указанной версии игры. Язык по умолчанию для такой версии обычно английский, если иное не определено логикой конкретной реализации (например, плагина).</li>
              <li><strong>Только язык (например, <code>domain=ru</code>, <code>domain=de</code>):</strong> Подразумевается Retail-версия игры на указанном языке.</li>
            </ul>
          </section>
          
          <section id="section4" class="section">
            <h2><i class="fas fa-cubes me-2"></i>4. Сущности Wowhead (Типы данных)</h2>
            <p>Wowhead оперирует множеством различных типов игровых данных, называемых "сущностями". Скрипт <code>https://wow.zamimg.com/widgets/power.js</code> использует внутреннюю систему числовых идентификаторов для этих типов, определенную в объекте <code>WH.Types</code>. Для лучшего понимания эти сущности можно концептуально сгруппировать на основе их роли и распространенности.</p>

            <h3 id="section4_1">4.1. Классификация сущностей</h3>
            <p>Ниже представлена попытка классифицировать сущности на основе их типичного использования и важности.</p>

            <h4><i class="fas fa-star me-1"></i>Категория 1: Основные (Обязательные) сущности</h4>
            <p>Это фундаментальные типы, необходимые для отображения ключевой игровой информации World of Warcraft. Они широко распространены и часто являются объектами запросов для получения всплывающих подсказок.</p>
            <ul class="list-group mb-3">
              <li class="list-group-item"><strong><code>item</code> (Предмет)</strong> <span class="badge bg-primary rounded-pill float-end">WH.Types.ITEM: 3</span><br>Экипировка, расходные материалы, реагенты и т.д.</li>
              <li class="list-group-item"><strong><code>spell</code> (Заклинание)</strong> <span class="badge bg-primary rounded-pill float-end">WH.Types.SPELL: 6</span><br>Способности игроков, NPC, эффекты предметов.</li>
              <li class="list-group-item"><strong><code>quest</code> (Задание)</strong> <span class="badge bg-primary rounded-pill float-end">WH.Types.QUEST: 5</span><br>Игровые задания.</li>
              <li class="list-group-item"><strong><code>npc</code> (Неигровой персонаж)</strong> <span class="badge bg-primary rounded-pill float-end">WH.Types.NPC: 1</span><br>Любые управляемые компьютером персонажи.</li>
              <li class="list-group-item"><strong><code>zone</code> (Зона)</strong> <span class="badge bg-primary rounded-pill float-end">WH.Types.ZONE: 7</span><br>Локации, подземелья, рейды, города.</li>
              <li class="list-group-item"><strong><code>achievement</code> (Достижение)</strong> <span class="badge bg-primary rounded-pill float-end">WH.Types.ACHIEVEMENT: 10</span><br>Игровые достижения.</li>
              <li class="list-group-item"><strong><code>object</code> (Объект)</strong> <span class="badge bg-primary rounded-pill float-end">WH.Types.OBJECT: 2</span><br>Интерактивные объекты мира (сундуки, руда, травы и т.д.).</li>
              <li class="list-group-item"><strong><code>faction</code> (Фракция)</strong> <span class="badge bg-primary rounded-pill float-end">WH.Types.FACTION: 8</span><br>Игровые фракции и репутации с ними.</li>
              <li class="list-group-item"><strong><code>player-class</code> (Класс игрока)</strong> (строковый ID: <code>class</code>) <span class="badge bg-primary rounded-pill float-end">WH.Types.PLAYER_CLASS: 13</span><br>Игровые классы (воин, маг и т.д.).</li>
              <li class="list-group-item"><strong><code>race</code> (Раса игрока)</strong> (строковый ID: <code>race</code>) <span class="badge bg-primary rounded-pill float-end">WH.Types.RACE: 14</span><br>Игровые расы (человек, орк и т.д.).</li>
              <li class="list-group-item"><strong><code>skill</code> (Навык/Профессия)</strong> (строковый ID: <code>skill</code>) <span class="badge bg-primary rounded-pill float-end">WH.Types.SKILL: 15</span><br>Основные и вторичные профессии, навыки владения оружием.</li>
            </ul>

            <h4><i class="fas fa-puzzle-piece me-1"></i>Категория 2: Дополнительные (Вспомогательные) сущности</h4>
            <p>Эти типы обычно расширяют или дополняют основные сущности, либо относятся к специфическим игровым системам и механикам (например, конкретных дополнений). Они могут быть не всегда доступны или релевантны.</p>
            <ul class="list-group mb-3">
              <li class="list-group-item"><strong><code>item-set</code> (Комплект предметов)</strong> <span class="badge bg-info rounded-pill float-end">WH.Types.ITEM_SET: 4</span><br>Наборы экипировки с бонусами за комплектность.</li>
              <li class="list-group-item"><strong><code>title</code> (Титул)</strong> <span class="badge bg-info rounded-pill float-end">WH.Types.TITLE: 11</span><br>Звания, отображаемые у персонажей.</li>
              <li class="list-group-item"><strong><code>event</code> (Игровое событие)</strong> <span class="badge bg-info rounded-pill float-end">WH.Types.EVENT: 12</span><br>Внутриигровые праздники, сезонные и мировые события.</li>
              <li class="list-group-item"><strong><code>currency</code> (Валюта)</strong> <span class="badge bg-info rounded-pill float-end">WH.Types.CURRENCY: 17</span><br>Различные виды игровой валюты (очки чести, доблести, специфические жетоны событий).</li>
              <li class="list-group-item"><strong><code>affix</code> (Аффикс)</strong> <span class="badge bg-info rounded-pill float-end">WH.Types.AFFIX: 40</span><br>Модификаторы эпохальных+ подземелий.</li>
              <li class="list-group-item"><strong><code>transmog-set</code> (Набор трансмогрификации)</strong> <span class="badge bg-info rounded-pill float-end">WH.Types.TRANSMOG_SET: 101</span><br>Готовые наборы внешнего вида для трансмогрификации.</li>
              <li class="list-group-item"><strong><code>outfit</code> (Наряд)</strong> <span class="badge bg-info rounded-pill float-end">WH.Types.OUTFIT: 110</span><br>Сохраненные пользователем комплекты экипировки для быстрой смены.</li>
              <li class="list-group-item"><strong><code>hunter-pet</code> (Питомец охотника)</strong> <span class="badge bg-info rounded-pill float-end">WH.Types.HUNTER_PET: 9</span><br>Способности и информация о питомцах класса Охотник.</li>
              <li class="list-group-item"><strong><code>guide</code> (Руководство)</strong> <span class="badge bg-info rounded-pill float-end">WH.Types.GUIDE: 100</span><br>Статьи-руководства на сайте Wowhead.</li>
              <li class="list-group-item"><strong><code>icon</code> (Иконка)</strong> <span class="badge bg-info rounded-pill float-end">WH.Types.ICON: 29</span><br>Отдельные игровые иконки (редко используются для прямых подсказок, чаще как часть других сущностей).</li>
              <li class="list-group-item"><strong><code>sound</code> (Звук)</strong> <span class="badge bg-info rounded-pill float-end">WH.Types.SOUND: 19</span><br>Игровые звуковые файлы.</li>
              <li class="list-group-item">... и другие, включая специфичные для дополнений, такие как <code>building</code>, <code>follower</code>, <code>mission</code>, <code>azerite-essence</code>, <code>azerite-essence-power</code>, <code>storyline</code>, <code>profession-trait</code>, <code>battle-pet-ability</code>, <code>trading-post-activity</code>. Полный список см. в объекте <code>WH.Types</code> скрипта <code>https://wow.zamimg.com/widgets/power.js</code>.</li>
            </ul>

            <h4><i class="fas fa-link me-1"></i>Категория 3: Самостоятельные системные сущности</h4>
            <p>Эти типы часто определяют базовые игровые условия или системные элементы и могут существовать независимо. Некоторые из них могут пересекаться с основными, так как они фундаментальны, но их контекст может быть более общим.</p>
            <ul class="list-group mb-3">
              <li class="list-group-item"><strong><code>resource</code> (Ресурс)</strong> <span class="badge bg-secondary rounded-pill float-end">WH.Types.RESOURCE: 27</span><br>Например, ресурсы гарнизона или оплота.</li>
              <li class="list-group-item"><strong><code>race</code> (Раса игрока)</strong> <span class="badge bg-secondary rounded-pill float-end">WH.Types.RACE: 14</span><br>Как общая концепция, определяющая доступные расы (также входит в Основные).</li>
              <li class="list-group-item"><strong><code>player-class</code> (Класс игрока)</strong> <span class="badge bg-secondary rounded-pill float-end">WH.Types.PLAYER_CLASS: 13</span><br>Как общая концепция, определяющая доступные классы (также входит в Основные).</li>
              <li class="list-group-item"><strong><code>zone</code> (Зона)</strong> <span class="badge bg-secondary rounded-pill float-end">WH.Types.ZONE: 7</span><br>Как общая концепция территории (также входит в Основные).</li>
              <li class="list-group-item"><strong><code>faction</code> (Фракция)</strong> <span class="badge bg-secondary rounded-pill float-end">WH.Types.FACTION: 8</span><br>Как общая концепция принадлежности (также входит в Основные).</li>
            </ul>
            <p class="mt-2"><strong>Примечание по внутренним ID <code>WH.Types</code>:</strong> Скрипт <code>https://wow.zamimg.com/widgets/power.js</code> использует числовые идентификаторы для типов. Некоторые из них напрямую соответствуют строковым названиям, для других требуется сопоставление (например, <code>PLAYER_CLASS</code> в <code>power.js</code> для строкового идентификатора <code>class</code>, который может использоваться в URL или атрибутах). Полный список числовых идентификаторов и их строковых представлений (если они есть) можно найти при анализе объекта <code>WH.Types</code> в самом скрипте <code>https://wow.zamimg.com/widgets/power.js</code>.</p>

            <h3 id="section4_2">4.2. Карта зависимостей (Взаимосвязь сущностей)</h3>
            <p>Многие основные сущности часто могут быть расширены или связаны с дополнительными (вспомогательными) сущностями, что добавляет им новые свойства, функции или связи с другими игровыми механиками. Наблюдения за структурой данных Wowhead и практикой использования подсказок позволяют выявить следующие распространенные взаимосвязи:</p>

            <div class="accordion" id="accordionDependencies">
              <div class="accordion-item">
                <h2 class="accordion-header" id="headingDepNpc">
                  <button class="accordion-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#collapseDepNpc" aria-expanded="false" aria-controls="collapseDepNpc">
                    <i class="fas fa-user me-2"></i><strong><code>npc</code> (Неигровой персонаж)</strong> + Зависимости
                  </button>
                </h2>
                <div id="collapseDepNpc" class="accordion-collapse collapse" aria-labelledby="headingDepNpc" data-bs-parent="#accordionDependencies">
                  <div class="accordion-body">
                    <p>Может быть связан с:</p>
                    <ul>
                      <li><code>event</code>: NPC может быть частью игрового события.</li>
                      <li><code>title</code>: NPC может обладать уникальным титулом.</li>
                      <li><code>faction</code>: NPC принадлежит к определённой фракции.</li>
                      <li><code>achievement</code>: NPC может быть целью или условием для получения достижения.</li>
                    </ul>
                    <p><em>Описание:</em> Эти связи обогащают информацию о NPC, указывая на его роль в игровых событиях, принадлежность и значимость в контексте достижений.</p>
                  </div>
                </div>
              </div>

              <div class="accordion-item">
                <h2 class="accordion-header" id="headingDepObject">
                  <button class="accordion-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#collapseDepObject" aria-expanded="false" aria-controls="collapseDepObject">
                    <i class="fas fa-cube me-2"></i><strong><code>object</code> (Объект)</strong> + Зависимости
                  </button>
                </h2>
                <div id="collapseDepObject" class="accordion-collapse collapse" aria-labelledby="headingDepObject" data-bs-parent="#accordionDependencies">
                  <div class="accordion-body">
                    <p>Может быть связан с:</p>
                    <ul>
                      <li><code>event</code>: Объект может появляться только во время определённых событий.</li>
                      <li><code>quest</code>: Объект может быть необходим для выполнения задания (квестовый предмет для взаимодействия).</li>
                    </ul>
                    <p><em>Описание:</em> Эти связи определяют контекст появления и использования объектов в игровом мире.</p>
                  </div>
                </div>
              </div>

              <div class="accordion-item">
                <h2 class="accordion-header" id="headingDepItem">
                  <button class="accordion-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#collapseDepItem" aria-expanded="false" aria-controls="collapseDepItem">
                     <i class="fas fa-shield-alt me-2"></i><strong><code>item</code> (Предмет)</strong> + Зависимости
                  </button>
                </h2>
                <div id="collapseDepItem" class="accordion-collapse collapse" aria-labelledby="headingDepItem" data-bs-parent="#accordionDependencies">
                  <div class="accordion-body">
                    <p>Может быть связан с:</p>
                    <ul>
                      <li><code>item-set</code>: Предмет является частью комплекта.</li>
                      <li><code>transmog-set</code>: Предмет может быть частью набора для трансмогрификации.</li>
                      <li><code>outfit</code>: Предмет может входить в сохраненный наряд.</li>
                      <li><code>currency</code>: Предмет может покупаться за определённую валюту или сам являться валютой.</li>
                      <li><code>achievement</code>: Предмет может быть наградой за достижение или его условием.</li>
                      <li><code>affix</code>: (Реже) Предмет может быть связан с системой аффиксов (например, награда).</li>
                      <li><code>event</code>: Предмет может быть доступен только во время игрового события.</li>
                      <li>Также, для дополнений типа BfA: <code>azerite-essence</code>, <code>azerite-essence-power</code>.</li>
                      <li>Для профессий: <code>profession-trait</code>.</li>
                      <li>Для боевых питомцев: <code>battle-pet-ability</code> (если предмет обучает способности).</li>
                      <li>Для торгового поста: <code>trading-post-activity</code>.</li>
                    </ul>
                    <p><em>Описание:</em> Предметы имеют множество потенциальных связей, отражающих их роль в экипировке, коллекционировании, экономике и игровых событиях.</p>
                  </div>
                </div>
              </div>
              
              <div class="accordion-item">
                <h2 class="accordion-header" id="headingDepQuest">
                  <button class="accordion-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#collapseDepQuest" aria-expanded="false" aria-controls="collapseDepQuest">
                    <i class="fas fa-exclamation-circle me-2"></i><strong><code>quest</code> (Задание)</strong> + Зависимости
                  </button>
                </h2>
                <div id="collapseDepQuest" class="accordion-collapse collapse" aria-labelledby="headingDepQuest" data-bs-parent="#accordionDependencies">
                  <div class="accordion-body">
                    <p>Может быть связано с:</p>
                    <ul>
                      <li><code>event</code>: Задание может быть частью временного игрового события.</li>
                      <li><code>achievement</code>: Выполнение задания может приводить к получению достижения.</li>
                      <li><code>storyline</code>: Задание является частью более крупной сюжетной линии.</li>
                    </ul>
                    <p><em>Описание:</em> Эти связи помещают задание в более широкий игровой контекст.</p>
                  </div>
                </div>
              </div>

              <div class="accordion-item">
                <h2 class="accordion-header" id="headingDepSpell">
                  <button class="accordion-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#collapseDepSpell" aria-expanded="false" aria-controls="collapseDepSpell">
                    <i class="fas fa-magic me-2"></i><strong><code>spell</code> (Заклинание)</strong> + Зависимости
                  </button>
                </h2>
                <div id="collapseDepSpell" class="accordion-collapse collapse" aria-labelledby="headingDepSpell" data-bs-parent="#accordionDependencies">
                  <div class="accordion-body">
                    <p>Может быть связано с:</p>
                    <ul>
                      <li><code>achievement</code>: Использование или получение заклинания может быть условием для достижения.</li>
                      <li><code>event</code>: Специальное заклинание, доступное только во время события.</li>
                      <li><code>azerite-essence-power</code> (BfA): Если заклинание является силой азеритовой сущности.</li>
                      <li><code>profession-trait</code>: Может быть связано с особенностями профессий.</li>
                      <li><code>battle-pet-ability</code>: Если это способность боевого питомца.</li>
                    </ul>
                    <p><em>Описание:</em> Связи заклинаний показывают их роль в различных игровых системах и событиях.</p>
                  </div>
                </div>
              </div>

              <div class="accordion-item">
                <h2 class="accordion-header" id="headingDepZone">
                  <button class="accordion-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#collapseDepZone" aria-expanded="false" aria-controls="collapseDepZone">
                    <i class="fas fa-map-marked-alt me-2"></i><strong><code>zone</code> (Зона)</strong> + Зависимости
                  </button>
                </h2>
                <div id="collapseDepZone" class="accordion-collapse collapse" aria-labelledby="headingDepZone" data-bs-parent="#accordionDependencies">
                  <div class="accordion-body">
                    <p>Может быть связана с:</p>
                    <ul>
                      <li><code>event</code>: События, происходящие в конкретной зоне.</li>
                      <li><code>achievement</code>: Достижения, связанные с исследованием или действиями в зоне.</li>
                      <li><code>storyline</code>: Зона является местом действия определенной сюжетной линии.</li>
                      <li><code>trading-post-activity</code>: Активности торгового поста могут быть привязаны к зонам.</li>
                    </ul>
                    <p><em>Описание:</em> Связи зоны определяют ее значимость в игровом мире и для различных активностей.</p>
                  </div>
                </div>
              </div>

              <div class="accordion-item">
                <h2 class="accordion-header" id="headingDepFaction">
                  <button class="accordion-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#collapseDepFaction" aria-expanded="false" aria-controls="collapseDepFaction">
                    <i class="fas fa-users me-2"></i><strong><code>faction</code> (Фракция)</strong> + Зависимости
                  </button>
                </h2>
                <div id="collapseDepFaction" class="accordion-collapse collapse" aria-labelledby="headingDepFaction" data-bs-parent="#accordionDependencies">
                  <div class="accordion-body">
                    <p>Может быть связана с:</p>
                    <ul>
                      <li><code>event</code>: События, влияющие на репутацию с фракцией.</li>
                      <li><code>achievement</code>: Достижения за достижение определённого уровня репутации.</li>
                      <li><code>title</code>: Титулы, получаемые за репутацию с фракцией.</li>
                    </ul>
                    <p><em>Описание:</em> Связи фракций отражают систему репутации и связанные с ней награды.</p>
                  </div>
                </div>
              </div>
              
              <div class="accordion-item">
                <h2 class="accordion-header" id="headingDepPlayerClass">
                  <button class="accordion-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#collapseDepPlayerClass" aria-expanded="false" aria-controls="collapseDepPlayerClass">
                    <i class="fas fa-user-shield me-2"></i><strong><code>player-class</code> (Класс игрока)</strong> + Зависимости
                  </button>
                </h2>
                <div id="collapseDepPlayerClass" class="accordion-collapse collapse" aria-labelledby="headingDepPlayerClass" data-bs-parent="#accordionDependencies">
                  <div class="accordion-body">
                    <p>Может быть связан с:</p>
                    <ul>
                      <li><code>profession-trait</code>: Особенности профессий, специфичные или часто используемые классом.</li>
                      <li><code>achievement</code>: Классовые достижения.</li>
                      <li><code>title</code>: Классовые титулы.</li>
                    </ul>
                    <p><em>Описание:</em> Определяет специфические для класса возможности и награды.</p>
                  </div>
                </div>
              </div>

              <div class="accordion-item">
                <h2 class="accordion-header" id="headingDepRace">
                  <button class="accordion-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#collapseDepRace" aria-expanded="false" aria-controls="collapseDepRace">
                    <i class="fas fa-user-tag me-2"></i><strong><code>race</code> (Раса игрока)</strong> + Зависимости
                  </button>
                </h2>
                <div id="collapseDepRace" class="accordion-collapse collapse" aria-labelledby="headingDepRace" data-bs-parent="#accordionDependencies">
                  <div class="accordion-body">
                    <p>Может быть связана с:</p>
                    <ul>
                      <li><code>achievement</code>: Расовые достижения.</li>
                      <li><code>title</code>: Расовые титулы (если есть).</li>
                    </ul>
                    <p><em>Описание:</em> Определяет специфические для расы награды.</p>
                  </div>
                </div>
              </div>

              <div class="accordion-item">
                <h2 class="accordion-header" id="headingDepSkill">
                  <button class="accordion-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#collapseDepSkill" aria-expanded="false" aria-controls="collapseDepSkill">
                    <i class="fas fa-tools me-2"></i><strong><code>skill</code> (Навык/Профессия)</strong> + Зависимости
                  </button>
                </h2>
                <div id="collapseDepSkill" class="accordion-collapse collapse" aria-labelledby="headingDepSkill" data-bs-parent="#accordionDependencies">
                  <div class="accordion-body">
                    <p>Может быть связано с:</p>
                    <ul>
                      <li><code>profession-trait</code>: Таланты или специализации профессий.</li>
                      <li><code>achievement</code>: Достижения, связанные с прокачкой или использованием профессий.</li>
                    </ul>
                    <p><em>Описание:</em> Отражает развитие и особенности профессий.</p>
                  </div>
                </div>
              </div>

              <div class="accordion-item">
                <h2 class="accordion-header" id="headingDepAchievementFull">
                  <button class="accordion-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#collapseDepAchievementFull" aria-expanded="false" aria-controls="collapseDepAchievementFull">
                    <i class="fas fa-trophy me-2"></i><strong><code>achievement</code> (Достижение)</strong> + Общие Зависимости
                  </button>
                </h2>
                <div id="collapseDepAchievementFull" class="accordion-collapse collapse" aria-labelledby="headingDepAchievementFull" data-bs-parent="#accordionDependencies">
                  <div class="accordion-body">
                    <p>Может быть связано практически со всеми другими основными и многими дополнительными сущностями, так как достижения часто являются результатом взаимодействия с ними:</p>
                    <ul>
                      <li><code>event</code>, <code>title</code>, <code>zone</code>, <code>quest</code>, <code>item</code>, <code>npc</code>, <code>faction</code>, <code>player-class</code>, <code>race</code>, <code>skill</code>.</li>
                    </ul>
                    <p><em>Описание:</em> Достижения по своей природе являются мета-сущностью, связывающей различные аспекты игры.</p>
                  </div>
                </div>
              </div>
            </div> 
            
            <p class="mt-3">Эти зависимости отражают, как различные игровые элементы переплетаются, создавая богатый и многогранный игровой опыт, который и пытаются отобразить всплывающие подсказки Wowhead.</p>
          </section>

          <section id="section5" class="section">
            <h2><i class="fas fa-file-code me-2"></i>5. Работа с XML-данными от Wowhead</h2>
            <p>Wowhead предоставляет XML-фиды для многих сущностей, что позволяет разработчикам получать структурированные данные для дальнейшей обработки, кастомного отображения или интеграции с другими системами. Этот метод является альтернативой или дополнением к использованию скрипта <code>https://wow.zamimg.com/widgets/power.js</code>.</p>

            <h3 id="section5_1">5.1. Требования к окружению для парсинга XML</h3>
            <p>Для успешного парсинга XML-данных с Wowhead на стороне сервера (например, с использованием PHP) необходимо следующее серверное окружение:</p>
            <ul class="list-group mb-3">
              <li class="list-group-item"><strong>Хостинг:</strong> Любой стандартный веб-хостинг с поддержкой PHP.</li>
              <li class="list-group-item"><strong>Версия PHP:</strong> Рекомендуется PHP 7.4 или выше. Более ранние версии (например, PHP 5.6, 7.0-7.3), хотя и могут работать, являются устаревшими и могут иметь отличия в поддержке XML-расширений.</li>
              <li class="list-group-item"><strong>PHP Расширения:</strong>
                <ul>
                  <li><code>libxml</code>: Базовая библиотека для работы с XML в PHP. Обычно включена по умолчанию в большинстве хостинг-сред.</li>
                  <li><code>SimpleXML</code>: Удобное расширение для парсинга XML-документов. Также обычно включено по умолчанию. Для проверки можно использовать PHP-функцию <code>class_exists('SimpleXMLElement')</code>.</li>
                  <li><code>cURL</code>: Предпочтительное расширение для выполнения HTTP-запросов к внешним серверам, таким как Wowhead, для получения XML-файлов. Оно предоставляет гибкие возможности для настройки запросов.</li>
                  <li><code>allow_url_fopen</code>: Если расширение <code>cURL</code> отсутствует или не настроено, директива <code>allow_url_fopen</code> в конфигурационном файле PHP (<code>php.ini</code>) должна быть установлена в <code>On</code>. Это позволит PHP-функциям, таким как <code>file_get_contents()</code>, работать с URL-адресами для получения удаленного контента. Однако <code>cURL</code> считается более безопасным и гибким вариантом.</li>
                </ul>
              </li>
            </ul>

            <h3 id="section5_2">5.2. Принцип построения URL для XML-запросов</h3>
            <p>Чтобы получить XML-данные для конкретной сущности, необходимо добавить параметр <code>&xml=1</code> (или просто <code>&xml</code>) к стандартному URL этой сущности на сайте Wowhead. Регистр параметра <code>xml</code> обычно не имеет значения.</p>
            
            <h4>Общий шаблон URL для XML:</h4>
            <pre><code class="language-http">https://{wowhead_domain}/{опциональный_языковой_путь}/{опциональный_путь_версии_игры}/{тип_сущности}={ID_сущности}&xml=1</code></pre>
            
            <h4>Примеры URL для получения XML:</h4>
            <ul class="list-unstyled">
              <li><i class="fas fa-link me-1 text-primary"></i><strong>Предмет (Retail, русский язык):</strong><br>
                <code>https://www.wowhead.com/ru/item=19019&xml=1</code>
              </li>
              <li class="mt-2"><i class="fas fa-link me-1 text-primary"></i><strong>Предмет (Retail, немецкий язык):</strong><br>
                <code>https://www.wowhead.com/de/item=19019&xml=1</code>
              </li>
              <li class="mt-2"><i class="fas fa-link me-1 text-primary"></i><strong>Задание (Classic, английский язык по умолчанию):</strong><br>
                <code>https://www.wowhead.com/classic/quest=1109&xml=1</code>
              </li>
              <li class="mt-2"><i class="fas fa-link me-1 text-primary"></i><strong>Задание (Classic, русский язык):</strong><br>
                <code>https://www.wowhead.com/classic/ru/quest=1109&xml=1</code>
              </li>
              <li class="mt-2"><i class="fas fa-link me-1 text-primary"></i><strong>Заклинание (Retail, русский язык):</strong><br>
                <code>https://www.wowhead.com/ru/spell=33786&xml=1</code>
              </li>
              <li class="mt-2"><i class="fas fa-link me-1 text-primary"></i><strong>Предмет с дополнительными параметрами (например, камни):</strong><br>
                <code>https://www.wowhead.com/ru/item=25697&gems=23121&xml=1</code>
                <br><small class="text-muted">(Параметры, такие как <code>gems</code>, <code>ench</code>, <code>pcs</code> и т.д., добавляются к URL перед параметром <code>&xml=1</code>)</small>
              </li>
            </ul>
            <p>Полные списки URL для различных версий игры и языков (например, для TBC, WotLK, Cata, MoP и их языковых вариаций) строятся по аналогичному принципу, подставляя соответствующий сегмент версии и языка в URL.</p>

            <h3 id="section5_3">5.3. Данные, извлекаемые из XML</h3>
            <p>XML-фид от Wowhead может содержать широкий спектр информации о запрашиваемой сущности. Структура XML может незначительно отличаться для разных типов сущностей, но обычно можно ожидать следующие ключевые данные:</p>
            <div class="table-responsive">
              <table class="table table-bordered table-hover">
                <thead class="table-light">
                  <tr>
                    <th>Тег XML (пример)</th>
                    <th>Описание данных</th>
                  </tr>
                </thead>
                <tbody>
                  <tr>
                    <td><code>&lt;name&gt;...&lt;/name&gt;</code></td>
                    <td>Официальное локализованное название сущности. Часто содержит CDATA.</td>
                  </tr>
                  <tr>
                    <td><code>&lt;icon displayId="..."&gt;...&lt;/icon&gt;</code></td>
                    <td>Имя файла иконки (без расширения, например, <code>inv_sword_67</code>) и иногда ее уникальный <code>displayId</code>.</td>
                  </tr>
                  <tr>
                    <td><code>&lt;link&gt;...&lt;/link&gt;</code></td>
                    <td>"Человекопонятный" URL (слаг) на страницу сущности на сайте Wowhead, часто включающий название.</td>
                  </tr>
                  <tr>
                    <td><code>&lt;quality id="..."&gt;...&lt;/quality&gt;</code></td>
                    <td>Качество предмета (например, "Эпический", "Редкий") и его числовой идентификатор.</td>
                  </tr>
                  <tr>
                    <td><code>&lt;class id="..."&gt;...&lt;/class&gt;</code></td>
                    <td>Класс предмета (например, "Оружие", "Броня").</td>
                  </tr>
                  <tr>
                    <td><code>&lt;subclass id="..."&gt;...&lt;/subclass&gt;</code></td>
                    <td>Подкласс предмета (например, "Мечи", "Кольчуга").</td>
                  </tr>
                  <tr>
                    <td><code>&lt;htmlTooltip&gt;...&lt;/htmlTooltip&gt;</code></td>
                    <td>Полный HTML-код стандартной всплывающей подсказки Wowhead. Может быть полезен для прямого отображения, если не используется <code>https://wow.zamimg.com/widgets/power.js</code>. Часто содержит CDATA.</td>
                  </tr>
                  <tr>
                    <td><code>&lt;json&gt;...&lt;/json&gt;</code></td>
                    <td>Общие данные об объекте в формате JSON (внутри CDATA). Требует дополнительного JSON-парсинга.</td>
                  </tr>
                  <tr>
                    <td><code>&lt;jsonEquip&gt;...&lt;/jsonEquip&gt;</code></td>
                    <td>Специфичные для экипировки данные в JSON-формате (статы, тип брони/оружия, требования и т.д., внутри CDATA).</td>
                  </tr>
                  <tr>
                    <td>Различные специфические теги</td>
                    <td>В зависимости от типа сущности, могут присутствовать теги с уровнем квеста, требованиями, школой магии для заклинаний, наградами и т.п.</td>
                  </tr>
                  <tr>
                    <td><code>&lt;error&gt;...&lt;/error&gt;</code></td>
                    <td>Если запрашиваемый объект не найден или произошла другая ошибка на стороне Wowhead, XML может содержать этот тег с описанием ошибки.</td>
                  </tr>
                </tbody>
              </table>
            </div>
            <div class="alert alert-info mt-3" role="alert">
              <i class="fas fa-info-circle me-2"></i>Для корректного парсинга данных, обернутых в CDATA (например, содержимое <code>&lt;name&gt;</code> или <code>&lt;htmlTooltip&gt;</code>), следует использовать соответствующие методы XML-парсера (например, приведение к строке в SimpleXML).
            </div>
          </section>

          <section id="section6" class="section">
            <h2><i class="fas fa-balance-scale me-2"></i>6. <code>https://wow.zamimg.com/widgets/power.js</code> vs. XML: Преимущества и ограничения</h2>
            <p>При работе с данными Wowhead у разработчиков есть два основных пути их получения и отображения: использование официального JavaScript-виджета <code>power.js</code> или прямой парсинг XML-фидов. У каждого подхода есть свои сильные и слабые стороны.</p>

            <div class="row mt-4">
              <div class="col-md-12">
                <h3 class="text-primary"><i class="fab fa-js-square me-2"></i><code>https://wow.zamimg.com/widgets/power.js</code></h3>
              </div>
            </div>
            <div class="row">
              <div class="col-md-6 mb-3">
                <h4><i class="fas fa-plus-circle text-success me-1"></i>Преимущества:</h4>
                <ul class="list-group list-group-flush">
                  <li class="list-group-item"><i class="fas fa-check text-success me-2"></i><strong>Простота интеграции:</strong> Достаточно подключить скрипт и определить глобальный <code>whTooltips</code> объект.</li>
                  <li class="list-group-item"><i class="fas fa-check text-success me-2"></i><strong>Автоматизация:</strong> Скрипт сам находит ссылки, генерирует HTML для подсказок, добавляет иконки и цвета качества.</li>
                  <li class="list-group-item"><i class="fas fa-check text-success me-2"></i><strong>Интерактивность:</strong> Предоставляет "живые" подсказки с возможностью переключения информации внутри самой подсказки.</li>
                  <li class="list-group-item"><i class="fas fa-check text-success me-2"></i><strong>Единый стиль:</strong> Обеспечивает консистентный и узнаваемый вид подсказок в стиле Wowhead.</li>
                  <li class="list-group-item"><i class="fas fa-check text-success me-2"></i><strong>Актуальность данных:</strong> Информация в подсказках всегда актуальна, так как подгружается напрямую с серверов Wowhead.</li>
                </ul>
              </div>
              <div class="col-md-6 mb-3">
                <h4><i class="fas fa-minus-circle text-danger me-1"></i>Ограничения:</h4>
                <ul class="list-group list-group-flush">
                  <li class="list-group-item"><i class="fas fa-times text-danger me-2"></i><strong>Глобальная конфигурация:</strong> Настройки в <code>whTooltips</code> применяются ко всем подсказкам на странице, усложняя индивидуальную настройку.</li>
                  <li class="list-group-item"><i class="fas fa-times text-danger me-2"></i><strong>Зависимость от внешнего ресурса:</strong> Работа зависит от доступности серверов <code>wow.zamimg.com</code>.</li>
                  <li class="list-group-item"><i class="fas fa-times text-danger me-2"></i><strong>Меньше контроля над данными:</strong> Разработчик получает уже сформированную HTML-подсказку; прямой доступ к сырым данным ограничен.</li>
                  <li class="list-group-item"><i class="fas fa-times text-danger me-2"></i><strong>Потенциальные конфликты:</strong> Могут возникать конфликты с другими JavaScript на странице.</li>
                </ul>
              </div>
            </div>

            <hr class="my-5"> 

            <div class="row mt-4">
              <div class="col-md-12">
                <h3 class="text-info"><i class="fas fa-file-excel me-2"></i>XML-фиды</h3>
              </div>
            </div>
            <div class="row">
              <div class="col-md-6 mb-3">
                <h4><i class="fas fa-plus-circle text-success me-1"></i>Преимущества:</h4>
                <ul class="list-group list-group-flush">
                  <li class="list-group-item"><i class="fas fa-check text-success me-2"></i><strong>Прямой доступ к данным:</strong> Получение структурированных сырых данных для кастомного использования.</li>
                  <li class="list-group-item"><i class="fas fa-check text-success me-2"></i><strong>Полный контроль над отображением:</strong> Возможность создать полностью кастомный дизайн.</li>
                  <li class="list-group-item"><i class="fas fa-check text-success me-2"></i><strong>Локальное кэширование:</strong> XML-ответы можно эффективно кэшировать, снижая зависимость и ускоряя загрузку.</li>
                  <li class="list-group-item"><i class="fas fa-check text-success me-2"></i><strong>Работа в оффлайн-режиме (с кэшем):</strong> Информация доступна при проблемах со связью с Wowhead.</li>
                  <li class="list-group-item"><i class="fas fa-check text-success me-2"></i><strong>Получение специфических деталей:</strong> XML может содержать больше деталей, чем стандартная подсказка.</li>
                </ul>
              </div>
              <div class="col-md-6 mb-3">
                <h4><i class="fas fa-minus-circle text-danger me-1"></i>Ограничения:</h4>
                <ul class="list-group list-group-flush">
                  <li class="list-group-item"><i class="fas fa-times text-danger me-2"></i><strong>Сложность реализации:</strong> Требует серверной логики для запроса, парсинга XML и формирования HTML.</li>
                  <li class="list-group-item"><i class="fas fa-times text-danger me-2"></i><strong>Отсутствие готовой интерактивности:</strong> Всю интерактивность придется реализовывать самостоятельно.</li>
                  <li class="list-group-item"><i class="fas fa-times text-danger me-2"></i><strong>Необходимость поддерживать актуальность парсера:</strong> Структура XML может измениться.</li>
                  <li class="list-group-item"><i class="fas fa-times text-danger me-2"></i><strong>Нагрузка на сервер Wowhead:</strong> Без кэширования частые запросы могут привести к ограничениям.</li>
                  <li class="list-group-item"><i class="fas fa-times text-danger me-2"></i><strong>Отсутствие стандартных иконок/стилей:</strong> Все визуальное оформление на разработчике.</li>
                </ul>
              </div>
            </div>
            <p class="mt-4 alert alert-light">Выбор подхода зависит от задач, уровня кастомизации и ресурсов разработки.</p>
          </section>

          <section id="section7" class="section">
            <h2><i class="fas fa-lightbulb me-2"></i>7. Полезные советы и рекомендации</h2>
            <p>Ниже приведены некоторые советы, которые могут помочь при работе с Wowhead Tooltips и отладке ваших проектов.</p>
            
            <h4><i class="fas fa-bug me-1"></i>Отладка работы <code>https://wow.zamimg.com/widgets/power.js</code>:</h4>
            <ul>
              <li>Всегда проверяйте <strong>консоль JavaScript</strong> вашего браузера (обычно F12, вкладка "Console") на наличие ошибок.</li>
              <li>Убедитесь, что объект <code>whTooltips</code> определен <strong>до</strong> подключения <code>https://wow.zamimg.com/widgets/power.js</code> и содержит корректные параметры.</li>
              <li>Проверьте, что скрипт <code>https://wow.zamimg.com/widgets/power.js</code> успешно загружается (вкладка "Network" / "Сеть", статус <code>200 OK</code>).</li>
              <li>Если ссылки не обрабатываются, убедитесь, что теги <code>&lt;a&gt;</code> имеют <code>href</code> на Wowhead или корректный атрибут <code>data-wowhead="тип=id&domain=язык.версия&..."</code>.</li>
            </ul>

            <h4><i class="fas fa-cogs me-1"></i>Работа с параметром <code>domain</code>:</h4>
            <ul>
              <li>Всегда используйте строчные буквы для значений <code>domain</code> (например, <code>ru.classic</code>).</li>
              <li>Для комбинаций языка и версии используйте формат <code>язык.версия</code> (например, <code>ru.classic</code>, <code>de.wotlk</code>).</li>
              <li>PTR и Beta версии обычно поддерживают только английский язык для подсказок.</li>
            </ul>

            <h4><i class="fas fa-database me-1"></i>XML и производительность:</h4>
            <ul>
              <li><strong>Всегда кэшируйте XML-ответы!</strong> В WordPress используйте Transients API.
                <ul>
                  <li>Время жизни кэша: 12-24 часа для статичных данных, 1-6 часов для часто обновляемых или ошибок 404.</li>
                </ul>
              </li>
              <li>Избегайте "живых" XML-запросов для каждой ссылки при каждой загрузке страницы.</li>
            </ul>
            
            <h4><i class="fas fa-paint-brush me-1"></i>Кастомизация внешнего вида (при использовании <code>power.js</code>):</h4>
            <ul>
              <li>Можно переопределять CSS-стили подсказок с помощью <code>!important</code>, но осторожно.</li>
              <li>Для изменения вида самих ссылок (текст, цвет), модифицируйте HTML-атрибуты ссылок, установив <code>renameLinks: false</code> и <code>colorLinks: false</code> в <code>whTooltips</code>.</li>
            </ul>

            <h4><i class="fas fa-lightbulb-on me-1"></i>"Фишки" и продвинутые аспекты:</h4>
            <ul>
              <li><strong>Расширенные параметры в <code>data-wowhead</code>:</strong> Можно передавать <code>lvl</code>, <code>gems</code>, <code>ench</code>, <code>pcs</code>, <code>bonus</code> для более точного отображения подсказки предмета.</li>
              <li><strong>Использование CSS-классов качества Wowhead:</strong> Если <code>colorLinks: true</code>, скрипт добавляет классы <code>q0</code>-<code>q7</code>. Их можно использовать для кастомной стилизации.</li>
              <li><strong>Проверка активности окружений данных:</strong> Внутренние функции <code>https://wow.zamimg.com/widgets/power.js</code> (например, <code>WH.isDataEnvActive(envId)</code>) теоретически могут использоваться для проверки активности PTR/Beta.</li>
            </ul>
             <div class="alert alert-warning mt-3" role="alert">
              <i class="fas fa-exclamation-triangle me-2"></i>Помните, что внутренние функции и структура <code>https://wow.zamimg.com/widgets/power.js</code> могут изменяться Wowhead без предварительного уведомления. Прямое использование недокументированных внутренних функций не рекомендуется.
            </div>
          </section>
        </main>
      </div>
    </div>

    <footer class="pt-3 mt-4 text-muted border-top text-center">
      &copy; Wowhead Tooltips Documentation Guide - Май 2025
    </footer>
  </div>

  <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0-alpha1/dist/js/bootstrap.bundle.min.js" integrity="sha384-w76AqPfDkMBDXo30jS1Sgez6pr3x5MlQ1ZAGC+nuZB+EYdgRZgiwxhTBTkF7CXvN" crossorigin="anonymous"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/components/prism-core.min.js"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/plugins/autoloader/prism-autoloader.min.js"></script>
  <script>
    document.addEventListener('DOMContentLoaded', function () {
      const sidebar = document.getElementById('sidebarMenu');
      if (!sidebar) return; 

      const sections = document.querySelectorAll('.section, .p-5.mb-4.bg-body-tertiary.rounded-3'); 
      const navLinks = sidebar.querySelectorAll('.nav-link');
      const navbarElement = document.querySelector('.navbar');
      const navbarHeight = navbarElement ? navbarElement.offsetHeight : 56; 
      
      function activateLink() {
        let current = '';
        const scrollPosition = window.pageYOffset;

        sections.forEach(section => {
          if (section) { 
            const sectionTop = section.offsetTop;
            const sectionHeight = section.offsetHeight;
            if (scrollPosition >= sectionTop - (navbarHeight + 45) && scrollPosition < sectionTop + sectionHeight - (navbarHeight + 45)) {
              current = section.getAttribute('id');
            }
          }
        });
        
        let anyLinkActive = false;
        navLinks.forEach(link => {
          link.classList.remove('active');
          const href = link.getAttribute('href');
          if (href && href.substring(1) === current) {
            link.classList.add('active');
            anyLinkActive = true;
          }
        });
        
        if (!anyLinkActive && navLinks.length > 0) {
           if (sections.length > 0 && scrollPosition < sections[0].offsetTop - (navbarHeight + 45)) {
                 navLinks[0].classList.add('active'); 
            }
        }
      }
      window.addEventListener('scroll', activateLink);
      activateLink(); 
    });
  </script>
</body>
</html>